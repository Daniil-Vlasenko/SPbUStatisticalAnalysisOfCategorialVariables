"0","incidence_matrix<-function(df){"
"0","  x <- data.frame(nrow=nrow(df))"
"0","  for(j in 1:ncol(df))"
"0","    for(k in min(df[, j]):max(df[, j])){"
"0","      s <- paste(colnames(df)[j], as.character(k), sep='_')"
"0","      x[1:nrow(df), s] <- 0"
"0","      x[which(df[, j] == k), s] <- 1"
"0","    }"
"0","  "
"0","  x$nrow <- NULL"
"0","  return(x)"
"0","}"
"0",""
"0","df.inc <- incidence_matrix(df.new)"
"0","df.inc <- df.inc %>% select(-prcod_4, -intpla_2, -educat_4, -end_1)"
"0","head(df.inc)"
